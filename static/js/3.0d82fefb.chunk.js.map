{"version":3,"sources":["../node_modules/react-lines-ellipsis/lib/html.js","../node_modules/react-lines-ellipsis/lib/common.js","../node_modules/react-lines-ellipsis/lib/helpers.js","components/feed/FeedPost.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_extends","Object","assign","target","i","arguments","length","source","key","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","_possibleConstructorReturn","self","ReferenceError","_assertThisInitialized","_get","property","receiver","Reflect","get","base","object","_getPrototypeOf","_superPropBase","desc","getOwnPropertyDescriptor","value","o","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","p","React","require","_require","canvasStyle","mirrorProps","omit","hookNode","node","basedOn","Error","concat","nodeType","Node","TEXT_NODE","units","frag","document","createDocumentFragment","textContent","split","Array","from","forEach","unit","appendChild","text","span","createElement","className","dummySpan","parentNode","replaceChild","ELEMENT_NODE","nodes","slice","childNodes","len","unwrapTextNode","createTextNode","removeFollowingElementLeaves","root","contains","nextElementSibling","removeChild","findBlockAncestor","ndAncestor","test","tagName","toLowerCase","affectLayout","ndUnit","offsetHeight","offsetWidth","defaultProps","component","unsafeHTML","maxLine","ellipsis","ellipsisHTML","undefined","onReflow","winWidth","usedProps","HTMLEllipsis","_React$Component","_this","instance","Constructor","TypeError","_classCallCheck","state","html","clamped","canvas","nlUnits","protoProps","staticProps","subClass","superClass","create","_inherits","initCanvas","reflow","prevProps","copyStyleToCanvas","callback","setAttribute","style","body","_this2","targetStyle","window","getComputedStyle","innerHTML","newState","putEllipsis","calcIndexes","setState","bind","indexes","querySelectorAll","nd1stLayoutUnit","find","line","offsetTop","push","ndPrevUnit","pop","ndEllipsis","makeEllipsisSpan","_this$props","_this3","_this$state","_this$props2","Component","rest","ref","dangerouslySetInnerHTML","__html","module","exports","position","bottom","left","height","overflow","border","omittedKeys","ret","LikeBtn","likes","postId","authorId","classes","useFeedPostStyles","useContext","UserContext","currentUserId","feedUsers","isAlreadyLiked","some","user_id","useState","like","setLike","Icon","UnlikeIcon","LikeIcon","liked","onClick","unlikePost","variables","update","handleUpdate","likePost","useMutation","LIKE_POST","UNLIKE_POST","userId","profileId","cache","result","limit","feedIds","data","readQuery","query","GET_FEED","count","insert_likes","__typename","posts","map","post","likes_aggregate","aggregate","writeQuery","SaveBtn","savedPosts","isAlreadySaved","save","setSave","RemoveIcon","SaveIcon","removePost","savePost","SAVE_POST","UNSAVE_POST","saveIcon","Comment","setText","CREATE_COMMENT","createComment","oldComment","insert_comments","returning","newComment","user","newPost","comments","comments_aggregate","id","commentContainer","fullWidth","placeholder","multiline","rowsMax","rows","textField","onChange","event","inputProps","underline","content","color","commentButton","disabled","trim","FeedPost","index","showCaption","setCaption","showDialogOptions","setDialogOptions","media","caption","saved_post","location","created_at","showFollowSuggestions","likesCount","commentsCount","article","marginBottom","postHeader","moreIcon","src","alt","image","postButtonsWrapper","postButtons","to","variant","expanded","collapsed","username","captionWrapper","moreButton","commentsLink","comment","commentUsername","datePosted","formatDateToNow","xsDown","onClose"],"mappings":"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","file":"static/js/3.0d82fefb.chunk.js","sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar React = require('react');\n\nvar _require = require('./common'),\n    canvasStyle = _require.canvasStyle,\n    mirrorProps = _require.mirrorProps;\n\nvar _require2 = require('./helpers'),\n    omit = _require2.omit;\n\nfunction hookNode(node, basedOn) {\n  /* eslint-env browser */\n  if (basedOn !== 'letters' && basedOn !== 'words') {\n    throw new Error(\"Unsupported options basedOn: \".concat(basedOn));\n  }\n\n  if (node.nodeType === Node.TEXT_NODE) {\n    var frag = document.createDocumentFragment();\n    var units;\n\n    switch (basedOn) {\n      case 'words':\n        units = node.textContent.split(/\\b|(?=\\W)/);\n        break;\n\n      case 'letters':\n        units = Array.from(node.textContent);\n        break;\n    }\n\n    units.forEach(function (unit) {\n      frag.appendChild(dummySpan(unit));\n    });\n    node.parentNode.replaceChild(frag, node);\n  } else if (node.nodeType === Node.ELEMENT_NODE) {\n    var nodes = [].slice.call(node.childNodes);\n    var len = nodes.length;\n\n    for (var i = 0; i < len; i++) {\n      hookNode(nodes[i], basedOn);\n    }\n  }\n}\n\nfunction dummySpan(text) {\n  var span = document.createElement('span');\n  span.className = 'LinesEllipsis-unit';\n  span.textContent = text;\n  return span;\n}\n\nfunction unwrapTextNode(node) {\n  node.parentNode.replaceChild(document.createTextNode(node.textContent), node);\n}\n\nfunction removeFollowingElementLeaves(node, root) {\n  if (!root.contains(node) || node === root) return;\n\n  while (node.nextElementSibling) {\n    node.parentNode.removeChild(node.nextElementSibling);\n  }\n\n  removeFollowingElementLeaves(node.parentNode, root);\n}\n\nfunction findBlockAncestor(node) {\n  var ndAncestor = node;\n\n  while (ndAncestor = ndAncestor.parentNode) {\n    if (/p|div|main|section|h\\d|ul|ol|li/.test(ndAncestor.tagName.toLowerCase())) {\n      return ndAncestor;\n    }\n  }\n}\n\nfunction affectLayout(ndUnit) {\n  return !!(ndUnit.offsetHeight && (ndUnit.offsetWidth || /\\S/.test(ndUnit.textContent)));\n}\n\nvar defaultProps = {\n  component: 'div',\n  unsafeHTML: '',\n  maxLine: 1,\n  ellipsis: '…',\n  // &hellip;\n  ellipsisHTML: undefined,\n  className: '',\n  basedOn: undefined,\n  onReflow: function onReflow() {},\n  winWidth: undefined // for the HOC\n\n};\nvar usedProps = Object.keys(defaultProps);\n/**\n * props.unsafeHTML {String} the rich content you want to clamp\n * props.maxLine {Number|String} max lines allowed\n * props.ellipsis {String} the ellipsis indicator\n * props.basedOn {String} letters|words\n * props.className {String}\n */\n\nvar HTMLEllipsis =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(HTMLEllipsis, _React$Component);\n\n  function HTMLEllipsis(props) {\n    var _this;\n\n    _classCallCheck(this, HTMLEllipsis);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(HTMLEllipsis).call(this, props));\n    _this.state = {\n      html: props.unsafeHTML,\n      clamped: false\n    };\n    _this.canvas = null;\n    _this.maxLine = 0;\n    _this.nlUnits = [];\n    return _this;\n  }\n\n  _createClass(HTMLEllipsis, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.initCanvas();\n      this.reflow(this.props);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.winWidth !== this.props.winWidth) {\n        this.copyStyleToCanvas();\n      }\n\n      if (this.props !== prevProps) {\n        this.reflow(this.props);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.canvas.parentNode.removeChild(this.canvas);\n    }\n  }, {\n    key: \"setState\",\n    value: function setState(state, callback) {\n      if (typeof state.clamped !== 'undefined') {\n        this.clamped = state.clamped;\n      }\n\n      return _get(_getPrototypeOf(HTMLEllipsis.prototype), \"setState\", this).call(this, state, callback);\n    }\n  }, {\n    key: \"initCanvas\",\n    value: function initCanvas() {\n      if (this.canvas) return;\n      var canvas = this.canvas = document.createElement('div');\n      canvas.className = \"LinesEllipsis-canvas \".concat(this.props.className);\n      canvas.setAttribute('aria-hidden', 'true');\n      this.copyStyleToCanvas();\n      Object.keys(canvasStyle).forEach(function (key) {\n        canvas.style[key] = canvasStyle[key];\n      });\n      document.body.appendChild(canvas);\n    }\n  }, {\n    key: \"copyStyleToCanvas\",\n    value: function copyStyleToCanvas() {\n      var _this2 = this;\n\n      var targetStyle = window.getComputedStyle(this.target);\n      mirrorProps.forEach(function (key) {\n        _this2.canvas.style[key] = targetStyle[key];\n      });\n    }\n  }, {\n    key: \"reflow\",\n    value: function reflow(props) {\n      /* eslint-disable no-control-regex */\n      this.maxLine = +props.maxLine || 1;\n      this.canvas.innerHTML = props.unsafeHTML;\n      var basedOn = props.basedOn || (/^[\\x00-\\x7F]+$/.test(props.unsafeHTML) ? 'words' : 'letters');\n      hookNode(this.canvas, basedOn);\n      var clamped = this.putEllipsis(this.calcIndexes());\n      var newState = {\n        clamped: clamped,\n        html: this.canvas.innerHTML\n      };\n      this.setState(newState, props.onReflow.bind(this, newState));\n    }\n  }, {\n    key: \"calcIndexes\",\n    value: function calcIndexes() {\n      var indexes = [0];\n      var nlUnits = this.nlUnits = Array.from(this.canvas.querySelectorAll('.LinesEllipsis-unit'));\n      var len = nlUnits.length;\n      if (!nlUnits.length) return indexes;\n      var nd1stLayoutUnit = nlUnits.find(affectLayout);\n      if (!nd1stLayoutUnit) return indexes;\n      var line = 1;\n      var offsetTop = nd1stLayoutUnit.offsetTop;\n\n      for (var i = 1; i < len; i++) {\n        if (affectLayout(nlUnits[i]) && nlUnits[i].offsetTop - offsetTop > 1) {\n          line++;\n          indexes.push(i);\n          offsetTop = nlUnits[i].offsetTop;\n\n          if (line > this.maxLine) {\n            break;\n          }\n        }\n      }\n\n      return indexes;\n    }\n  }, {\n    key: \"putEllipsis\",\n    value: function putEllipsis(indexes) {\n      if (indexes.length <= this.maxLine) return false;\n      this.nlUnits = this.nlUnits.slice(0, indexes[this.maxLine]);\n      var ndPrevUnit = this.nlUnits.pop();\n      var ndEllipsis = this.makeEllipsisSpan();\n\n      do {\n        removeFollowingElementLeaves(ndPrevUnit, this.canvas);\n        findBlockAncestor(ndPrevUnit).appendChild(ndEllipsis);\n        ndPrevUnit = this.nlUnits.pop();\n      } while (ndPrevUnit && (!affectLayout(ndPrevUnit) || ndEllipsis.offsetHeight > ndPrevUnit.offsetHeight || ndEllipsis.offsetTop > ndPrevUnit.offsetTop));\n\n      if (ndPrevUnit) {\n        unwrapTextNode(ndPrevUnit);\n      }\n\n      this.nlUnits.forEach(unwrapTextNode);\n      return true;\n    }\n  }, {\n    key: \"makeEllipsisSpan\",\n    value: function makeEllipsisSpan() {\n      var _this$props = this.props,\n          ellipsisHTML = _this$props.ellipsisHTML,\n          ellipsis = _this$props.ellipsis;\n      var frag = document.createElement('span');\n      frag.appendChild(document.createElement('wbr'));\n      var ndEllipsis = document.createElement('span');\n      ndEllipsis.className = 'LinesEllipsis-ellipsis';\n\n      if (ellipsisHTML) {\n        ndEllipsis.innerHTML = ellipsisHTML;\n      } else {\n        ndEllipsis.textContent = ellipsis;\n      }\n\n      frag.appendChild(ndEllipsis);\n      return frag;\n    } // expose\n\n  }, {\n    key: \"isClamped\",\n    value: function isClamped() {\n      return this.clamped; // do not use state.clamped. #27\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          html = _this$state.html,\n          clamped = _this$state.clamped;\n\n      var _this$props2 = this.props,\n          Component = _this$props2.component,\n          className = _this$props2.className,\n          unsafeHTML = _this$props2.unsafeHTML,\n          rest = _objectWithoutProperties(_this$props2, [\"component\", \"className\", \"unsafeHTML\"]);\n\n      return React.createElement(Component, _extends({\n        className: \"LinesEllipsis \".concat(clamped ? 'LinesEllipsis--clamped' : '', \" \").concat(className),\n        ref: function ref(node) {\n          return _this3.target = node;\n        }\n      }, omit(rest, usedProps)), React.createElement(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: clamped ? html : unsafeHTML\n        }\n      }));\n    }\n  }]);\n\n  return HTMLEllipsis;\n}(React.Component);\n\nHTMLEllipsis.defaultProps = defaultProps;\nmodule.exports = HTMLEllipsis;\n\n","\"use strict\";\n\nmodule.exports = {\n  canvasStyle: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    height: 0,\n    overflow: 'hidden',\n    'padding-top': 0,\n    'padding-bottom': 0,\n    border: 'none'\n  },\n  mirrorProps: ['box-sizing', 'width', 'font-size', 'font-weight', 'font-family', 'font-style', 'letter-spacing', 'text-indent', 'white-space', 'word-break', 'overflow-wrap', 'padding-left', 'padding-right']\n};\n\n","\"use strict\";\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction omit(obj, omittedKeys) {\n  if (!obj || _typeof(obj) !== 'object') {\n    return obj;\n  }\n\n  var ret = {};\n  Object.keys(obj).forEach(function (key) {\n    if (omittedKeys.indexOf(key) > -1) {\n      return;\n    }\n\n    ret[key] = obj[key];\n  });\n  return ret;\n}\n\nmodule.exports = {\n  omit: omit\n};\n\n","import React, { useState, useContext } from \"react\";\nimport { useFeedPostStyles } from \"../../styles\";\nimport UserCard from \"../shared/UserCard\";\nimport {\n  MoreIcon,\n  CommentIcon,\n  ShareIcon,\n  UnlikeIcon,\n  LikeIcon,\n  RemoveIcon,\n  SaveIcon,\n} from \"../../icons\";\nimport { Link } from \"react-router-dom\";\nimport {\n  Typography,\n  Button,\n  Hidden,\n  Divider,\n  TextField,\n} from \"@material-ui/core\";\nimport HTMLEllipsis from \"react-lines-ellipsis/lib/html\";\nimport FollowSuggestions from \"../shared/FollowSuggestions\";\nimport OptionsDialog from \"../shared/OptionsDialog\";\nimport { formatDateToNow } from \"../../utils/formatDate\";\nimport Img from \"react-graceful-image\";\nimport { UserContext } from \"../../App\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport {\n  LIKE_POST,\n  UNLIKE_POST,\n  SAVE_POST,\n  UNSAVE_POST,\n  CREATE_COMMENT,\n} from \"../../graphql/mutations\";\nimport { GET_FEED } from \"../../graphql/queries\";\n\nfunction FeedPost({ post, index }) {\n  const classes = useFeedPostStyles();\n  const [showCaption, setCaption] = useState(false);\n  const [showDialogOptions, setDialogOptions] = useState(false);\n  const {\n    media,\n    id,\n    likes,\n    likes_aggregate,\n    user,\n    caption,\n    comments,\n    comments_aggregate,\n    saved_post,\n    location,\n    created_at,\n  } = post;\n\n  const showFollowSuggestions = index === 1;\n  const likesCount = likes_aggregate.aggregate.count;\n  const commentsCount = comments_aggregate.aggregate.count;\n\n  return (\n    <>\n      <article\n        className={classes.article}\n        style={{ marginBottom: showFollowSuggestions && 30 }}\n      >\n        <div className={classes.postHeader}>\n          <UserCard user={user} location={location} />\n          <MoreIcon\n            className={classes.moreIcon}\n            onClick={() => setDialogOptions(true)}\n          />\n        </div>\n\n        <div>\n          <Img src={media} alt=\"Post img\" className={classes.image} />\n        </div>\n        <div className={classes.postButtonsWrapper}>\n          <div className={classes.postButtons}>\n            <LikeBtn likes={likes} postId={id} authorId={user.id} />\n            <Link to={`/p/${id}`}>\n              <CommentIcon />\n            </Link>\n            <ShareIcon />\n            <SaveBtn savedPosts={saved_post} postId={id} />\n          </div>\n          <Typography className={classes.likes} variant=\"subtitle2\">\n            <span>\n              {\" \"}\n              {likesCount === 1 ? \"1 like\" : `${likesCount} likes `}{\" \"}\n            </span>\n          </Typography>\n\n          <div className={showCaption ? classes.expanded : classes.collapsed}>\n            <Link to={`/${user.username}`}>\n              <Typography\n                variant=\"subtitle2\"\n                className={classes.username}\n                component=\"span\"\n              >\n                {user.username}\n              </Typography>\n            </Link>\n            {showCaption ? (\n              <Typography\n                component=\"span\"\n                variant=\"body2\"\n                dangerouslySetInnerHTML={{ __html: caption }}\n              />\n            ) : (\n              <div className={classes.captionWrapper}>\n                <HTMLEllipsis\n                  unsafeHTML={caption}\n                  className={classes.caption}\n                  maxLine=\"0\"\n                  ellipsis=\"...\"\n                  basedOn=\"letters\"\n                />\n                <Button\n                  className={classes.moreButton}\n                  onClick={() => setCaption(true)}\n                >\n                  more\n                </Button>\n              </div>\n            )}\n          </div>\n          <Link to={`/p/${id}`}>\n            <Typography\n              className={classes.commentsLink}\n              variant=\"body2\"\n              component=\"div\"\n            >\n              View all {commentsCount} comments.\n            </Typography>\n          </Link>\n          {comments.map((comment) => (\n            <div key={comment.id}>\n              <Link to={`/${comment.user.username}`}>\n                <Typography\n                  variant=\"subtitle2\"\n                  component=\"span\"\n                  className={classes.commentUsername}\n                >\n                  {comment.user.username}\n                </Typography>{\" \"}\n                <Typography variant=\"body2\" component=\"span\">\n                  {comment.content}\n                </Typography>\n              </Link>\n            </div>\n          ))}\n          <Typography color=\"textSecondary\" className={classes.datePosted}>\n            {formatDateToNow(created_at)}\n          </Typography>\n        </div>\n        <Hidden xsDown>\n          <Divider />\n          <Comment postId={id} />\n        </Hidden>\n      </article>\n      {showFollowSuggestions && <FollowSuggestions />}\n      {showDialogOptions && (\n        <OptionsDialog\n          postId={id}\n          authorId={user.id}\n          onClose={() => setDialogOptions(false)}\n        />\n      )}\n    </>\n  );\n}\n\nfunction LikeBtn({ likes, postId, authorId }) {\n  const classes = useFeedPostStyles();\n  const { currentUserId, feedUsers } = useContext(UserContext);\n  const isAlreadyLiked = likes.some(({ user_id }) => user_id === currentUserId);\n\n  const [like, setLike] = useState(isAlreadyLiked);\n  const Icon = like ? UnlikeIcon : LikeIcon;\n  const className = like ? classes.liked : classes.like;\n  const onClick = like ? handleUnLike : handleLike;\n\n  const [likePost] = useMutation(LIKE_POST);\n  const [unlikePost] = useMutation(UNLIKE_POST);\n  const variables = {\n    postId,\n    userId: currentUserId,\n    profileId: authorId,\n  };\n\n  function handleUpdate(cache, result) {\n    const variables = { limit: 2, feedIds: feedUsers };\n    const data = cache.readQuery({\n      query: GET_FEED,\n      variables,\n    });\n    const typename = result.data.insert_likes?.__typename;\n    const count = typename === \"likes_mutation_response\" ? 1 : -1;\n    const posts = data.posts.map((post) => ({\n      ...post,\n      likes_aggregate: {\n        ...post.likes_aggregate,\n        aggregate: {\n          ...post.likes_aggregate.aggregate,\n          count: post.likes_aggregate.aggregate.count + count,\n        },\n      },\n    }));\n    cache.writeQuery({ query: GET_FEED, data: { posts } });\n  }\n  function handleUnLike() {\n    setLike(false);\n    unlikePost({ variables, update: handleUpdate });\n  }\n  function handleLike() {\n    setLike(true);\n    likePost({ variables, update: handleUpdate });\n  }\n  return <Icon className={className} onClick={onClick} />;\n}\nfunction SaveBtn({ postId, savedPosts }) {\n  const classes = useFeedPostStyles();\n  const { currentUserId } = useContext(UserContext);\n  const isAlreadySaved = savedPosts.some(\n    ({ user_id }) => user_id === currentUserId\n  );\n  const [save, setSave] = useState(isAlreadySaved);\n  const Icon = save ? RemoveIcon : SaveIcon;\n  const onClick = save ? handleUnSave : handleSave;\n  const [savePost] = useMutation(SAVE_POST);\n  const [removePost] = useMutation(UNSAVE_POST);\n  const variables = {\n    postId,\n    userId: currentUserId,\n  };\n\n  function handleUnSave() {\n    setSave(false);\n    removePost({ variables });\n  }\n  function handleSave() {\n    setSave(true);\n    savePost({ variables });\n  }\n  return <Icon className={classes.saveIcon} onClick={onClick} />;\n}\nfunction Comment({ postId }) {\n  const classes = useFeedPostStyles();\n  const { currentUserId, feedUsers } = useContext(UserContext);\n\n  const [text, setText] = useState(\"\");\n  const [createComment] = useMutation(CREATE_COMMENT);\n  function handleUpdate(cache, result) {\n    const variables = { limit: 2, feedIds: feedUsers };\n    const data = cache.readQuery({\n      query: GET_FEED,\n      variables,\n    });\n    const oldComment = result.data.insert_comments.returning[0];\n    const newComment = {\n      ...oldComment,\n      user: { ...oldComment.user },\n    };\n    const posts = data.posts.map((post) => {\n      const newPost = {\n        ...post,\n        comments: [...post.comments, newComment],\n        comments_aggregate: {\n          ...post.comments_aggregate,\n          aggregate: {\n            ...post.comments_aggregate.aggregate,\n            count: post.comments_aggregate.aggregate.count + 1,\n          },\n        },\n      };\n      return post.id === postId ? newPost : post;\n    });\n    cache.writeQuery({ query: GET_FEED, data: { posts } });\n    setText(\"\");\n  }\n  function handleAddComment() {\n    const variables = {\n      content: text,\n      postId,\n      userId: currentUserId,\n    };\n    createComment({ variables, update: handleUpdate });\n  }\n\n  return (\n    <div className={classes.commentContainer}>\n      <TextField\n        fullWidth\n        value={text}\n        placeholder=\"Add a comment\"\n        multiline\n        rowsMax={2}\n        rows={1}\n        className={classes.textField}\n        onChange={(event) => setText(event.target.value)}\n        inputProps={{\n          classes: {\n            root: classes.root,\n            underline: classes.underline,\n          },\n        }}\n      />\n      <Button\n        onClick={handleAddComment}\n        color=\"primary\"\n        className={classes.commentButton}\n        disabled={!text.trim()}\n      >\n        Post\n      </Button>\n    </div>\n  );\n}\nexport default FeedPost;\n"],"sourceRoot":""}